<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ app_name }} - RHC Hemodynamics Calculator</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
    <div class="container">
        <header>
            <h1>{{ app_name }} - Right Heart Catheterization Hemodynamics</h1>
            <p class="subtitle">{{ app_author }} | Version {{ app_version }}</p>
        </header>

        <form action="/calculate" method="POST" class="rhc-form">
            <!-- Patient Information -->
            <section class="form-section">
                <h2>Patient Information</h2>
                <div class="form-row">
                    <div class="form-group">
                        <label for="patient_name">Patient Name <span class="optional">(optional)</span></label>
                        <input type="text" id="patient_name" name="patient_name" placeholder="e.g., Eugene Braunwald">
                    </div>
                    <div class="form-group">
                        <label for="patient_id">Patient ID/MBO <span class="optional">(optional)</span></label>
                        <input type="text" id="patient_id" name="patient_id">
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label for="operator_name">Physician/Operator</label>
                        <input type="text" id="operator_name" name="operator_name" required>
                    </div>
                    <div class="form-group">
                        <label for="institution">Institution</label>
                        <input type="text" id="institution" name="institution" value="{{ default_institution }}">
                    </div>
                </div>
            </section>

            <!-- Anthropometrics -->
            <section class="form-section">
                <h2>Anthropometrics</h2>
                <div class="form-row">
                    <div class="form-group">
                        <label for="height_cm">Height (cm)</label>
                        <input type="number" id="height_cm" name="height_cm" step="0.1" value="175" required>
                    </div>
                    <div class="form-group">
                        <label for="weight_kg">Weight (kg)</label>
                        <input type="number" id="weight_kg" name="weight_kg" step="0.1" value="80" required>
                    </div>
                    <div class="form-group">
                        <label for="hb">Hemoglobin (g/L)</label>
                        <input type="number" id="hb" name="hb" step="0.1" value="140" required>
                    </div>
                </div>
            </section>

            <!-- Oxygen Saturations -->
            <section class="form-section">
                <h2>Oxygen Saturations (%)</h2>
                <div class="form-row">
                    <div class="form-group">
                        <label for="sao2">Radial Artery SaO₂</label>
                        <input type="number" id="sao2" name="sao2" step="0.1" value="95" required>
                    </div>
                    <div class="form-group">
                        <label for="svc">SVC Saturation <span class="optional">(optional)</span></label>
                        <input type="number" id="svc" name="svc" step="0.1" placeholder="e.g., 65">
                    </div>
                    <div class="form-group">
                        <label for="ivc">IVC Saturation <span class="optional">(optional)</span></label>
                        <input type="number" id="ivc" name="ivc" step="0.1" placeholder="e.g., 70">
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label for="ra_sat">RA Saturation <span class="optional">(optional)</span></label>
                        <input type="number" id="ra_sat" name="ra_sat" step="0.1" placeholder="e.g., 65">
                    </div>
                    <div class="form-group">
                        <label for="rv_sat">RV Saturation <span class="optional">(optional)</span></label>
                        <input type="number" id="rv_sat" name="rv_sat" step="0.1" placeholder="e.g., 65">
                    </div>
                    <div class="form-group">
                        <label for="pa_sat">PA Saturation <span class="optional">(optional)</span></label>
                        <input type="number" id="pa_sat" name="pa_sat" step="0.1" placeholder="e.g., 65">
                    </div>
                </div>
            </section>

            <!-- Hemodynamic Pressures -->
            <section class="form-section">
                <h2>Hemodynamic Pressures (mmHg)</h2>
                <div class="form-row">
                    <div class="form-group">
                        <label for="ra_mean">RA Mean Pressure</label>
                        <input type="number" id="ra_mean" name="ra_mean" step="0.1" value="10" required>
                    </div>
                    <div class="form-group">
                        <label for="pa_sys">PA Systolic</label>
                        <input type="number" id="pa_sys" name="pa_sys" step="0.1" value="40" required>
                    </div>
                    <div class="form-group">
                        <label for="pa_dia">PA Diastolic</label>
                        <input type="number" id="pa_dia" name="pa_dia" step="0.1" value="20" required>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label for="pcwp">PCWP Mean</label>
                        <input type="number" id="pcwp" name="pcwp" step="0.1" value="15" required>
                    </div>
                    <div class="form-group">
                        <label for="hr">Heart Rate (bpm)</label>
                        <input type="number" id="hr" name="hr" step="1" value="70" required>
                    </div>
                </div>
            </section>

            <!-- Systemic Pressures (Optional) -->
            <section class="form-section">
                <h2>Systemic Pressures (mmHg) <span class="optional">- Optional for SVR/CPO</span></h2>
                <div class="form-row">
                    <div class="form-group">
                        <label for="sbp">Systemic SBP <span class="optional">(optional)</span></label>
                        <input type="number" id="sbp" name="sbp" step="0.1" placeholder="e.g., 120">
                    </div>
                    <div class="form-group">
                        <label for="dbp">Systemic DBP <span class="optional">(optional)</span></label>
                        <input type="number" id="dbp" name="dbp" step="0.1" placeholder="e.g., 70">
                    </div>
                </div>
            </section>

            <!-- Metabolic -->
            <section class="form-section">
                <h2>Metabolic</h2>
                <div class="form-row">
                    <div class="form-group">
                        <label for="vo2">Measured VO₂ (mL/min) <span class="optional">(leave blank to estimate)</span></label>
                        <input type="number" id="vo2" name="vo2" step="0.1" placeholder="e.g., 250 (or leave blank)">
                        <small class="help-text">If blank, will estimate as 3.5 mL/kg/min × weight</small>
                    </div>
                </div>
            </section>

            <div class="form-actions">
                <button type="submit" class="btn-primary">Calculate Hemodynamics</button>
                <button type="reset" class="btn-secondary">Reset Form</button>
            </div>
        </form>

        <footer>
            <p>&copy; 2024-2026 {{ app_author }}. For clinical decision support.</p>
        </footer>
    </div>
</body>
</html>
